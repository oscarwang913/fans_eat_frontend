(this["webpackJsonpfans-eat-frontend"]=this["webpackJsonpfans-eat-frontend"]||[]).push([[0],{133:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(13),c=n.n(r),i=(n(133),n(19)),s=n(15),o=n(209),l=n(200),u=n(106),d=Object(u.a)({palette:{type:"light",primary:{main:"#ff9100",light:"#ffc246",dark:"#c56200",contrastText:"#ffffff"},secondary:{main:"#ffffff",light:"#ffffff",dark:"#cccccc",contrastText:"#2f2f2f"},background:{default:"#FAFAFA"}},typography:{fontFamily:["Roboto","Pacifico","sans-serif"]}}),j=n(9),h=n(185),m=n(193),b=n(194),p=n(187),g=n(190),f=n(189),O=n(191),x=n(219),v=n(75),y="token",N=function(e){localStorage.setItem(y,e)},C=function(){return localStorage.getItem(y)},A=function(e){var t=e.fullName,n=e.userName,a=e.email,r=e.password,c={};return/^[\W\w\s]{3,20}$/.test(t)?c.fullName=!1:c.fullName=!0,/^[\W\w\s]{3,20}$/.test(n)?c.userName=!1:c.userName=!0,/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a)?c.email=!1:c.email=!0,/^[\w\s\S]{6,20}$/.test(r)?c.password=!1:c.password=!0,Object.values(c)},w=n(210),k=n(1),P=Object(h.a)((function(e){return{root:{minWidth:331,marginRight:e.spacing(2)},simpleCardRoot:{margin:e.spacing(1),cursor:"pointer"},media:{height:0,paddingTop:"56.25%"},avatar:{backgroundColor:"#ff0000"},photoCard:{marginBottom:e.spacing(2),display:"flex",justifyContent:"center",padding:e.spacing(1)},photo:{width:"30%",height:"30%",objectFit:"contain"},likeIcon:{cursor:"pointer",marginRight:e.spacing(1)},likedIcon:{color:"#ff0000",marginRight:e.spacing(1)},likeSection:{display:"flex",justifyContent:"flex-end",alignItems:"center"}}}));function I(e){var t=e.imageUrl,n=P();return Object(k.jsx)(p.a,{className:n.photoCard,children:Object(k.jsx)(f.a,{component:"img",className:n.photo,image:t})})}function S(e){var t,n=e.post,a=e.children,r=e.handleOpen,c=P();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(p.a,{className:c.simpleCardRoot,children:[Object(k.jsx)(g.a,{avatar:Object(k.jsx)(x.a,{"aria-label":"recipe",className:c.avatar,children:n.User.userName[0]}),title:n.User.userName,subheader:(t=n.createdAt,t.split("T")[0])}),Object(k.jsx)(f.a,{className:c.media,image:n.image,onClick:r,"data-id":n.id}),Object(k.jsxs)(O.a,{children:[Object(k.jsx)(v.a,{gutterBottom:!0,variant:"h6",component:"h4",children:n.content}),Object(k.jsxs)(w.a,{component:"div",className:c.likeSection,children:[a,Object(k.jsx)(v.a,{gutterBottom:!0,variant:"h6",component:"h4",children:n.Total})]})]})]})})}var L=n(98),U=n.n(L),B=n(195),E=n(7);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var M=a.createElement("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0;256.58892822265625"});function F(e,t){var n=e.title,r=e.titleId,c=T(e,["title","titleId"]);return a.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("path",{fill:"none",stroke:"#ff9100",strokeWidth:8,strokeDasharray:"42.76482137044271 42.76482137044271",d:"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z",strokeLinecap:"round",style:{transform:"scale(0.8)",transformOrigin:"50px 50px"}},M))}var W=a.forwardRef(F);n.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Y=a.createElement("g",{transform:"translate(50 50)"},a.createElement("path",{fill:"#ff0000",transform:"scale(0.8)",d:"M40.7-34.3c-9.8-9.8-25.6-9.8-35.4,0L0-29l-5.3-5.3c-9.8-9.8-25.6-9.8-35.4,0l0,0c-9.8,9.8-9.8,25.6,0,35.4l5.3,5.3L-23,18.7l23,23l23-23L35.4,6.3L40.7,1C50.4-8.8,50.4-24.6,40.7-34.3z"},a.createElement("animateTransform",{attributeName:"transform",type:"scale",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.05;0.39;0.45;0.6;1",values:"0.68;0.8;0.6000000000000001;0.7200000000000001;0.68;0.6400000000000001",calcMode:"spline",keySplines:"0.215 0.61,0.355 1;0.215 0.61,0.355 1;0.215 0.61,0.355 1;0.215 0.61,0.355 1;0.215 0.61,0.355 1"})));function G(e,t){var n=e.title,r=e.titleId,c=R(e,["title","titleId"]);return a.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"rgba(0, 0, 0, 0) none repeat scroll 0% 0%",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,Y)}var V=a.forwardRef(G),J=(n.p,Object(h.a)((function(){return{lodinglogo:{width:"82%",height:"96%",backgroundColor:"rgba(255, 255, 255, 0.3)",position:"absolute",top:"50%",left:"50%",transform:"translate(-40%, -50%)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center"},likeLoading:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},signinupLoding:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255, 255, 255, 0.3)",width:"100vw",height:"100vh"}}}))),H=function(){var e=J();return Object(k.jsx)("div",{className:e.lodinglogo,children:Object(k.jsx)(W,{})})},Z=function(){var e=J();return Object(k.jsx)("div",{className:e.likeLoading,children:Object(k.jsx)(V,{})})},K=function(){var e=J();return Object(k.jsx)("div",{className:e.signinupLoding,children:Object(k.jsx)(W,{})})},X=n(25),Q="https://fanseatapp.herokuapp.com/api",q=Object(X.b)({name:"post",initialState:{allPosts:[],allOwnPosts:[],singlePost:"",totalPostCount:null,currentPage:1,newPost:null,totalLikeCount:null,isLoadingPosts:!1,isLoadingLikeCount:!1},reducers:{setIsLoadingPost:function(e,t){e.isLoadingPosts=t.payload},setIsLoadingLikeCount:function(e,t){e.isLoadingLikeCount=t.payload},setAllPosts:function(e,t){e.allPosts=t.payload},setTotalPostCount:function(e,t){e.totoalPostCount=t.payload},setCurrentPage:function(e,t){e.currentPage=t.payload},setNewPost:function(e,t){e.newPost=t.payload},setTotalLikeCount:function(e,t){e.totalLikeCount=t.payload},setAllOwnPosts:function(e,t){e.allOwnPosts=t.payload},setSinglePost:function(e,t){e.singlePost=t.payload},reset:function(e){e.singlePost=""}}}),_=q.actions,$=_.setIsLoadingPost,ee=_.setAllPosts,te=_.setTotalPostCount,ne=_.setCurrentPage,ae=_.setNewPost,re=_.setTotalLikeCount,ce=_.setIsLoadingLikeCount,ie=_.setAllOwnPosts,se=_.setSinglePost,oe=_.reset,le=function(){return function(e){(function(){var e=C();return fetch("".concat(Q,"/posts/count"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))})().then((function(t){!1!==t.success&&e(te(t.count))}))}},ue=function(e,t){return function(n){n($(!0)),function(e,t){var n=C();return fetch("".concat(Q,"/posts/?limit=").concat(t,"&page=").concat(e),{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()}))}(e,t).then((function(e){n($(!1)),!1!==e.auth&&n(ee(e.posts))})).catch((function(e){console.log(e)}))}},de=function(e){return function(t){t($(!0)),function(e){var t=C();return fetch("".concat(Q,"/posts/all/").concat(e),{headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}))}(e).then((function(e){if(t($(!1)),!1!==e.success)return t(ie(e.posts)),e})).catch((function(e){console.log(e)}))}},je=function(e,t,n){return function(a){return function(e,t,n){var a=C(),r=new FormData;return r.append("content",e),r.append("image",t),r.append("UserId",n),fetch("".concat(Q,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(a)},body:r}).then((function(e){return e.json()}))}(e,t,n).then((function(e){if(!1!==e.success)return a(ae(e)),e}))}},he=function(){return function(e){(function(){var e=C();return fetch("".concat(Q,"/likes"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))})().then((function(t){!1!==t.success&&e(re(t.result))}))}},me=function(e){return function(t){return t(ce(!0)),function(e){var t=C();return fetch("".concat(Q,"/likes"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({postId:e})}).then((function(e){return e.json()}))}(e).then((function(e){return t(ce(!1)),!1===e.success||t(he()),e.message}))}},be=function(e){return function(t){return function(e){var t=C();return fetch("".concat(Q,"/posts/").concat(e),{headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}))}(e).then((function(e){return!1===e.success?e.message:(t(se(e)),e)}))}},pe=function(e,t,n,a){return function(r){return function(e,t,n,a){var r=C(),c=new FormData;return c.append("content",e),c.append("image",t),c.append("UserId",n),fetch("".concat(Q,"/posts/").concat(a),{method:"PATCH",headers:{authorization:"Bearer ".concat(r)},body:c}).then((function(e){return e.json()}))}(e,t,n,a).then((function(e){if(!1!==e.success)return e}))}},ge=function(e){return e.post.totoalPostCount},fe=function(e){return e.post.allPosts},Oe=function(e){return e.post.allOwnPosts},xe=function(e){return e.post.singlePost},ve=function(e){return e.post.currentPage},ye=function(e){return e.post.totalLikeCount},Ne=function(e){return e.post.isLoadingLikeCount},Ce=q.reducer,Ae=Object(h.a)((function(e){return{root:{"& > *":{marginTop:e.spacing(2)}},PaginationContainer:{marginTop:"20px",display:"flex",alignItems:"center"},activePageNumber:{width:e.spacing(5),height:e.spacing(5),fontSize:"28px",padding:e.spacing(2),border:"1px solid ".concat(e.palette.primary.main),cursor:"pointer",marginRight:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},pageNumber:{fontSize:"16px",padding:e.spacing(2),cursor:"pointer",marginRight:"8px"}}}));function we(e){for(var t=e.postsPerPage,n=e.handlePageClick,a=Object(E.c)(ge),r=Object(E.c)(ve),c=Ae(),i=Math.ceil(a/t),s=[],o=1;o<=i;o++)s.push(o);return Object(k.jsx)(w.a,{className:c.PaginationContainer,children:s.map((function(e){return Object(k.jsx)(w.a,{className:e===r?c.activePageNumber:c.pageNumber,onClick:function(){n(e)},children:e},e)}))})}var ke=n(212),Pe=n(192),Ie=n(145),Se=Object(h.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},container:{width:"100%"},image:{width:"100%"}}}));function Le(e){var t=e.open,n=e.handleClose,a=Se(),r=Object(E.c)(xe);return Object(k.jsx)("div",{children:Object(k.jsx)(ke.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:Pe.a,BackdropProps:{timeout:500},children:Object(k.jsx)(Ie.a,{in:t,children:Object(k.jsx)("div",{className:a.paper,children:r&&Object(k.jsxs)(w.a,{className:a.container,children:[Object(k.jsx)(v.a,{variant:"h6",color:"primary",gutterBottom:!0,className:a.username,children:r.post.User.userName}),Object(k.jsx)("img",{className:a.image,src:r.post.image,alt:"postImg"})]})})})})})}var Ue=Object(h.a)((function(e){return{root:{minHeight:"85vh",marginTop:e.spacing(5),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},likeIcon:{cursor:"pointer"},likeButton:{backgroundColor:"transparent",outline:"none",border:"none",padding:0}}}));function Be(){var e=Ue(),t=C(),n=Object(E.b)(),r=Object(s.f)(),c=Object(E.c)(fe),i=Object(E.c)(ye),o=Object(E.c)(Ne),l=Object(E.c)(ve),u=Object(a.useState)(!1),d=Object(j.a)(u,2),h=d[0],p=d[1],g=function(e){p(!0),n(be(e.target.dataset.id))};Object(a.useEffect)((function(){n(le()),n(ue(l,12))}),[n,l,12,i]),Object(a.useEffect)((function(){null!=t&&t?r.push("/"):r.push("/signin")}),[r,t]);var f=function(e){e.preventDefault();var t=parseInt(e.target.postId.value);n(me(t)),n(he())};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Le,{handleClose:function(){p(!1),n((function(e){e(oe())}))},open:h}),Object(k.jsx)(m.a,{maxWidth:"lg",className:e.root,children:c&&c.length>0&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(b.a,{container:!0,spacing:1,direction:"row",justify:"center",children:c&&c.length>0&&c.map((function(t,n){return Object(k.jsx)(b.a,{item:!0,xs:12,sm:3,children:Object(k.jsx)(S,{post:t,handleOpen:g,children:Object(k.jsxs)("form",{onSubmit:f,children:[Object(k.jsx)("input",{type:"hidden",value:t.id,name:"postId"}),Object(k.jsx)(B.a,{"data-id":t.id,type:"submit",className:e.likeButton,children:Object(k.jsx)(U.a,{className:e.likeIcon})})]})})},n)}))}),o&&Object(k.jsx)(Z,{}),Object(k.jsx)(we,{postsPerPage:12,currentPage:l,handlePageClick:function(e){n(ne(e))}})]})})]})}var Ee=Object(X.b)({name:"auth",initialState:{user:null,alertMsg:null,isLoadingUser:!1},reducers:{setUsers:function(e,t){e.user=t.payload},setAlertMsg:function(e,t){e.alertMsg=t.payload},setIsLoadingUser:function(e,t){e.isLoadingUser=t.payload},setLogout:function(e){e.user=null}}}),De=Ee.actions,Te=De.setUsers,Me=De.setAlertMsg,Fe=De.setIsLoadingUser,We=De.setLogout,ze=function(){return function(e){if(e(Fe(!0)),C())return function(){var e=C();return fetch("".concat(Q,"/auth/me"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))}().then((function(t){if(e(Fe(!1)),!0===t.success)return e(Te(t)),t;N(null)}));e(Fe(!1))}},Re=function(e,t){return function(n){return n(Fe(!0)),function(e,t){return fetch("".concat(Q,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()}))}(e,t).then((function(e){return!0!==e.success?(n(Me(e.message)),void n(Fe(!1))):(N(e.token),n(ze()))}))}},Ye=function(e,t,n,a,r){return function(c){return c(Fe(!0)),function(e,t,n,a,r){return fetch("".concat(Q,"/auth/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({fullName:e,userName:t,email:n,password:a,RoleId:r})}).then((function(e){return e.json()}))}(e,t,n,a,r).then((function(e){return!0!==e.success?(c(Me(e.message)),void c(Fe(!1))):(N(e.token),c(ze()))}))}},Ge=function(e){return e.auth.user},Ve=function(e){return e.auth.alertMsg},Je=Ee.reducer,He=n(216),Ze=n(199),Ke=n(99),Xe=n.n(Ke),Qe=n(217),qe=n(215),_e=n(198),$e=n(213),et=["\u53f0\u5317\u4e8c","\u53f0\u5317\u4e00","\u677f\u6a4b\u5340","\u4e09\u91cd\u5340","\u5b9c\u862d\u5e02","\u6843\u3000\u8fb2","\u53f0\u4e2d\u5e02 ","\u8c50\u539f\u5340","\u6c38\u9756\u9109 ","\u6eaa\u6e56\u93ae","\u5357\u6295\u5e02 ","\u897f\u87ba\u93ae","\u9ad8\u96c4\u5e02","\u9cf3\u5c71\u5340","\u5c4f\u6771\u5e02","\u53f0\u6771\u5e02","\u82b1\u84ee\u5e02"],tt=Object(h.a)((function(e){return{update:{margin:e.spacing(3,0,2)},updateBtn:{margin:e.spacing(3,0,2)},deleteBtn:{margin:e.spacing(3,0,2),backgroundColor:"#ff0000",color:"#ffffff","&:hover":{backgroundColor:"#ff0000"}},input:{display:"none"},formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)},toSignup:{textDecoration:"none",color:"#000000"},iprice:{display:"Flex",flexDirection:"column",marginRight:e.spacing(1)}}}));function nt(e){var t=e.value,n=e.handleFullNameChange,a=e.handleUserNameChange,r=e.handleEmailChange,c=e.handlePasswordChange,i=e.alertMsg,s=e.disabled,o=e.error,l=tt(),u=t.fullName,d=t.userName,j=t.email,h=t.password;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.a,{align:"center",component:"h1",variant:"h6",children:"\u8a3b\u518a"}),Object(k.jsx)(v.a,{align:"center",component:"h1",variant:"h6",color:"error",children:i||""}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"fullName",label:"\u5168\u540d",name:"fullName",type:"text",value:u,onChange:n,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:o[0]}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"userName",label:"\u4f7f\u7528\u8005\u540d\u7a31",name:"userName",autoComplete:"userName",type:"text",value:d,onChange:a,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:o[1]}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"email",label:"Email",name:"email",type:"email",value:j,onChange:r,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:o[2]}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"password",label:"\u5bc6\u78bc",name:"password",type:"password",value:h,onChange:c,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:o[3]}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"roleId",name:"RoleId",type:"hidden",value:"4"}),Object(k.jsx)(B.a,{disabled:s,type:"submit",fullWidth:!0,variant:"contained",className:l.submit,color:"primary",children:"\u52a0\u5165\u6211\u5011"})]})}function at(e){var t=e.value,n=e.handleEmailChange,a=e.handlePasswordChange,r=e.alertMsg,c=e.disabled,s=e.error,o=tt(),l=t.email,u=t.password;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.a,{align:"center",component:"h1",variant:"h4",children:"\u767b\u5165"}),Object(k.jsx)(v.a,{align:"center",component:"h1",variant:"h6",color:"error",children:r||""}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"email",label:"Email",name:"email",type:"email",value:l,onChange:n,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:s[2]}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"password",label:"\u5bc6\u78bc",name:"password",type:"password",value:u,onChange:a,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,error:s[3]}),Object(k.jsx)(B.a,{disabled:c,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,children:"\u767b\u5165"}),Object(k.jsx)(v.a,{component:i.b,variant:"subtitle2",children:"\u9084\u6c92\u6709\u5e33\u6236\u55ce?",to:"/signup",className:o.toSignup})]})}function rt(e){var t=e.value,n=e.fullNameError,a=e.userNameError,r=e.emailError,c=e.handleFullNameChange,i=e.handleUserNameChange,s=e.handleEmailChange,o=tt(),l=t.fullName,u=t.userName,d=t.email;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"fullName",label:"\u5168\u540d",name:"fullName",type:"text",value:l,onChange:c,error:n,InputLabelProps:{shrink:!0},fullWidth:!0}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"userName",label:"\u4f7f\u7528\u8005\u540d\u7a31",name:"userName",autoComplete:"userName",type:"text",value:u,onChange:i,error:a,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0}),Object(k.jsx)(He.a,{size:"medium",margin:"normal",id:"email",label:"Email",name:"email",type:"email",value:d,onChange:s,error:r,InputLabelProps:{shrink:!0},fullWidth:!0}),Object(k.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.updateBtn,children:"\u66f4\u65b0"})]})}function ct(e){var t=e.content,n=e.handleContentChange,a=e.handleImageChange,r=e.image,c=e.userId,i=tt();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(He.a,{variant:"outlined",size:"medium",margin:"normal",id:"content",label:"Content",name:"content",type:"text",value:t,onChange:n,InputLabelProps:{shrink:!0},required:!0,fullWidth:!0,multiline:!0,rows:6,placeholder:"Share your dishes name (no more than 10 words)"}),Object(k.jsx)("input",{accept:"image/*",className:i.input,id:"icon-button-file",type:"file",name:"image",onChange:a}),Object(k.jsx)("label",{htmlFor:"icon-button-file",children:Object(k.jsx)(Ze.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(k.jsx)(Xe.a,{})})}),Object(k.jsx)("input",{id:"userId",type:"hidden",name:"userId",value:c}),r.length>0&&Object(k.jsx)(I,{imageUrl:r}),Object(k.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"\u63d0\u4ea4"})]})}function it(e){var t,n=e.handleMarketChange,a=e.handleCropChange,r=e.handleStartDateChange,c=e.handleEndDateChange,i=e.marketName,s=e.cropName,o=tt();return Object(k.jsxs)("div",{className:o.iprice,children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(He.a,{id:"date",fullWidth:!0,onChange:r,label:"\u958b\u59cb\u65e5\u671f",type:"date",className:o.textField,InputLabelProps:{shrink:!0}}),Object(k.jsx)(He.a,{id:"date",onChange:c,fullWidth:!0,label:"\u7d50\u675f\u65e5\u671f",type:"date",className:o.textField,InputLabelProps:{shrink:!0}})]}),Object(k.jsxs)("div",{children:[Object(k.jsxs)(_e.a,{className:o.formControl,fullWidth:!0,children:[Object(k.jsx)(Qe.a,{id:"demo-simple-select-label",children:"\u5e02\u5834"}),Object(k.jsx)($e.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,onChange:n,children:(t=et,t.map((function(e,t){return Object(k.jsx)(qe.a,{value:"".concat(e),children:e},t)})))})]}),Object(k.jsx)(He.a,{fullWidth:!0,size:"medium",id:"cropname",label:"\u83dc\u540d",name:"cropname",type:"text",value:s,onChange:a,InputLabelProps:{shrink:!0}})]}),Object(k.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"\u63d0\u4ea4"})]})}var st=n(111),ot=n.p+"static/media/photo-1605522508768-f8697d6e8e24.bb9ba6eb.jpg",lt=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(ot,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"}}}));function ut(e){var t=e.children,n=lt();return Object(k.jsxs)(b.a,{container:!0,component:"main",className:n.root,children:[Object(k.jsx)(l.a,{}),Object(k.jsx)(b.a,{item:!0,xs:!1,sm:4,md:8,className:n.image}),Object(k.jsx)(b.a,{item:!0,xs:12,sm:8,md:4,component:st.a,elevation:6,square:!0,children:Object(k.jsx)("div",{className:n.paper,children:t})})]})}function dt(){var e=Object(E.b)(),t=Object(s.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(""),m=Object(j.a)(h,2),b=m[0],p=m[1],g=Object(a.useState)(""),f=Object(j.a)(g,2),O=f[0],x=f[1],v=Object(a.useState)([]),y=Object(j.a)(v,2),N=y[0],C=y[1],w=Object(a.useState)(!0),P=Object(j.a)(w,2),I=P[0],S=P[1],L=Object(a.useState)(!1),U=Object(j.a)(L,2),B=U[0],D=U[1],T=Object(E.c)((function(e){return e.auth.alertMsg})),M=Object(E.c)((function(e){return e.auth.isLoadingUser}));Object(a.useEffect)((function(){return function(){return e(Me(""))}}),[e]);var F=function(e){return function(t){e(t.target.value),S(!1)}};return Object(k.jsxs)(ut,{children:[B&&M&&Object(k.jsx)(K,{}),Object(k.jsx)("form",{onSubmit:function(n){n.preventDefault(),D(!0);var a=parseInt(n.target.RoleId.value),r=A({fullName:c,userName:u,email:b,password:O});if(!r.every((function(e){return!1===e})))return C(r),void D(!1);e(Ye(c,u,b,O,a)).then((function(n){n&&(e(Fe(!1)),t.push("/"))}))},children:Object(k.jsx)(nt,{value:{fullName:c,userName:u,email:b,password:O},handleFullNameChange:F(i),handleUserNameChange:F(d),handleEmailChange:F(p),handlePasswordChange:F(x),alertMsg:T,disabled:I,error:N})})]})}function jt(){var e=Object(E.b)(),t=Object(s.f)(),n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(""),m=Object(j.a)(h,2),b=m[0],p=m[1],g=Object(a.useState)([]),f=Object(j.a)(g,2),O=f[0],x=f[1],v=Object(a.useState)(!0),y=Object(j.a)(v,2),N=y[0],C=y[1],w=Object(E.c)(Ve),P=Object(E.c)((function(e){return e.auth.isLoadingUser}));Object(a.useEffect)((function(){return function(){return e(Me(""))}}),[e]);var I=function(e){return function(t){e(t.target.value),C(!1)}};return Object(k.jsxs)(ut,{children:[P&&c&&Object(k.jsx)(K,{}),Object(k.jsx)("form",{onSubmit:function(n){n.preventDefault(),i(!0);var a=A({email:u,password:b});if(!a.every((function(e){return!1===e})))return x(a),void i(!1);e(Re(u,b)).then((function(n){n&&(e(Fe(!1)),t.push("/"))}))},children:Object(k.jsx)(at,{value:{email:u,password:b},handleEmailChange:I(d),handlePasswordChange:I(p),alertMsg:w,disabled:N,error:O})})]})}var ht=Object(h.a)((function(e){return{root:{maxHeight:"85vh",marginTop:e.spacing(5),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",textAlign:"center"},paper:{width:"100%",padding:e.spacing(2),height:"100%"}}}));function mt(){var e=ht(),t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(""),h=Object(j.a)(d,2),b=h[0],p=h[1],g=Object(E.b)(),f=Object(s.f)(),O=Object(E.c)(Ge),x=Object(E.c)(Ge).user.id;return Object(k.jsx)(k.Fragment,{children:3!==O.user.RoleId?Object(k.jsx)(m.a,{component:"main",maxWidth:"md",className:e.root,children:Object(k.jsx)(st.a,{elevation:1,className:e.paper,children:Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),g(je(b,r,x)).then((function(e){e&&!0===e.success&&f.push("/")}))},className:e.form,encType:"multipart/form-data",children:Object(k.jsx)(ct,{content:b,image:l,userId:x,handleContentChange:function(e){p(e.target.value)},handleImageChange:function(e){var t=URL.createObjectURL(e.target.files[0]);c(e.target.files[0]),u(t)}})})})}):Object(k.jsx)(m.a,{component:"main",maxWidth:"md",className:e.root,children:"You are currently banned!"})})}var bt=n(146),pt=Object(h.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",overflow:"hidden",backgroundColor:e.palette.background},contentBox:{position:"relative",width:"100%",height:"100%"},imageBox:{width:"100%",height:"100%",overflow:"hidden","& > img":{width:"100%",height:"100%",objectFit:"cover"}},titleBox:{color:e.palette.secondary.main,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",position:"absolute",top:0,left:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",opacity:0,transition:"opacity 0.3s ease-in-out","&:hover":{opacity:1}},editBtn:{color:e.palette.primary.main,padding:e.spacing(1),borderRadius:e.spacing(1),border:"1px solid ".concat(e.palette.primary.main)}}}));function gt(e){var t=e.posts,n=pt(),a=Object(s.f)(),r=function(e){a.push("/editpost/".concat(e.target.dataset.id))};return Object(k.jsx)("div",{children:Object(k.jsx)(b.a,{container:!0,component:"main",className:n.root,spacing:1,children:t&&t.map((function(e,t){return Object(k.jsx)(b.a,{item:!0,xs:12,sm:3,children:Object(k.jsxs)(w.a,{className:n.contentBox,children:[Object(k.jsx)(w.a,{className:n.imageBox,children:Object(k.jsx)("img",{src:e.image,alt:e.content,className:n.image})}),Object(k.jsxs)(w.a,{className:n.titleBox,children:[Object(k.jsx)("p",{children:e.content}),Object(k.jsx)("span",{"data-id":e.id,onClick:r,className:n.editBtn,children:"\u7de8\u8f2f"})]})]})},t)}))})})}var ft=n(59),Ot=n(108),xt=n(211),vt=n(201);function yt(e){var t=e.children,n=e.value,a=e.index,r=Object(Ot.a)(e,["children","value","index"]);return Object(k.jsx)("div",Object(ft.a)(Object(ft.a)({role:"tabpanel",hidden:n!==a,id:"vertical-tabpanel-".concat(a),"aria-labelledby":"vertical-tab-".concat(a)},r),{},{children:n===a&&Object(k.jsx)(w.a,{p:3,children:Object(k.jsx)(v.a,{component:"div",children:t})})}))}function Nt(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Ct=Object(h.a)((function(e){return{tabs:{borderRight:"1px solid ".concat(e.palette.divider)},firstPanel:{width:"100%"},secondPanel:{width:"100%"}}}));function At(e){var t=e.children,n=Ct(),r=Object(a.useState)(0),c=Object(j.a)(r,2),i=c[0],s=c[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(xt.a,{orientation:"vertical",variant:"scrollable",value:i,onChange:function(e,t){s(t)},"aria-label":"Vertical tabs example",className:n.tabs,children:[Object(k.jsx)(vt.a,Object(ft.a)({label:"\u95dc\u65bc\u6211"},Nt(0))),Object(k.jsx)(vt.a,Object(ft.a)({label:"\u6211\u7684POST"},Nt(1)))]}),Object(k.jsx)(yt,{value:i,index:0,className:n.firstPanel,children:Object(k.jsxs)(b.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(b.a,{item:!0,xs:12,component:"div",children:Object(k.jsx)("img",{src:"data:image/png;base64,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"})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:t[0]})]})}),Object(k.jsx)(yt,{value:i,index:1,className:n.secondPanel,children:Object(k.jsx)(b.a,{container:!0,direction:"column",alignItems:"center",children:t[1]})})]})}var wt=Object(X.b)({name:"user",initialState:{userNewInfo:"",alertMsg:null,isLoadingUpdate:!1},reducers:{setUserNewInfo:function(e,t){e.userNewInfo=t.payload},setAlertMsg:function(e,t){e.alertMsg=t.payload},setIsLoadingUpdate:function(e,t){e.isLoadingUpdate=t.payload}}}),kt=wt.actions,Pt=kt.setUserNewInfo,It=kt.setAlertMsg,St=kt.setIsLoadingUpdate,Lt=function(e,t,n,a){return function(r){return r(St(!0)),function(e,t,n,a){var r=C();return fetch("".concat(Q,"/users/").concat(a),{method:"PATCH",headers:{authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify({fullName:e,userName:t,email:n})}).then((function(e){return e.json()}))}(e,t,n,a).then((function(e){if(r(St(!1)),!1!==e.success)return r(Pt(e)),e;r(It(e.message))}))}},Ut=function(e){return e.user.isLoadingUpdate},Bt=wt.reducer,Et=Object(bt.a)((function(e){return{root:{minHeight:"85vh",marginTop:e.spacing(5),padding:e.spacing(2),display:"flex"}}}));function Dt(){var e=Object(s.g)().id,t=Et(),n=Object(E.c)(Ge),r=Object(E.c)(Ut),c=Object(E.c)(Oe),i=Object(a.useState)(n.user.fullName),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(n.user.userName),h=Object(j.a)(d,2),m=h[0],b=h[1],p=Object(a.useState)(n.user.email),g=Object(j.a)(p,2),f=g[0],O=g[1],x=Object(E.b)(),v=Object(s.f)(),y=function(e){return function(t){e(t.target.value)}};Object(a.useEffect)((function(){x(de(e))}),[x,e]);return Object(k.jsx)("div",{className:t.root,children:Object(k.jsxs)(At,{children:[n&&Object(k.jsxs)(k.Fragment,{children:[r&&Object(k.jsx)("div",{children:"Loading..."}),Object(k.jsx)("form",{onSubmit:function(t){t.preventDefault(),x(Lt(l,m,f,e)).then((function(t){t&&t.user&&v.push("/account/".concat(e))}))},children:Object(k.jsx)(rt,{value:{fullName:l,userName:m,email:f},handleFullNameChange:y(u),handleUserNameChange:y(b),handleEmailChange:y(O)})})]}),n&&c&&Object(k.jsx)(gt,{posts:c})]})})}var Tt=Object(h.a)((function(e){return{root:{maxHeight:"85vh",marginTop:e.spacing(5),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",textAlign:"center"},paper:{width:"100%",padding:e.spacing(2),height:"100%"}}}));function Mt(){var e=Object(s.g)().id,t=Tt(),n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(""),b=Object(j.a)(h,2),p=b[0],g=b[1],f=Object(E.b)(),O=Object(s.f)(),x=Object(E.c)(Ge).user.id;Object(a.useEffect)((function(){f(be(e)).then((function(e){!0===e.success&&(g(e.post.content),d(e.post.image))}))}),[f,e]);return Object(k.jsx)(m.a,{component:"main",maxWidth:"md",className:t.root,children:Object(k.jsx)(st.a,{elevation:1,className:t.paper,children:Object(k.jsx)("form",{onSubmit:function(t){t.preventDefault(),f(pe(p,c,x,e)).then((function(e){e&&!0===e.success&&O.push("/account/".concat(x))}))},className:t.form,encType:"multipart/form-data",children:Object(k.jsx)(ct,{content:p,image:u,userId:x,handleContentChange:function(e){g(e.target.value)},handleImageChange:function(e){var t=URL.createObjectURL(e.target.files[0]);i(e.target.files[0]),d(t)}})})})})}var Ft=n(214),Wt=n(221),zt=Object(h.a)((function(e){return{root:{minHeight:"85vh",marginTop:e.spacing(5),padding:e.spacing(2),position:"relative"},button:{marginBottom:e.spacing(2)},sideBar:{wordBreak:"break-all",whiteSpace:"pre-line",textAlign:"center"},board:{wordBreak:"break-all",whiteSpace:"pre-line"},sidePaper:{minHeight:"85vh",padding:e.spacing(5,1,2),display:"flex",flexDirection:"column",justifyContent:"space-between"},boardTitle:{borderBottom:"1px solid #cccccc",height:e.spacing(11)}}}));var Rt=Object(Wt.a)()((function(e){var t=e.title,n=e.children,a=zt();return Object(k.jsx)(m.a,{maxWidth:"xl",className:a.root,children:Object(k.jsxs)(b.a,{container:!0,direction:"row",component:"main",children:[Object(k.jsx)(Ft.a,{xsDown:!0,children:Object(k.jsx)(b.a,{item:!0,xs:!1,sm:2,className:a.sideBar,component:"aside",children:Object(k.jsxs)(st.a,{elevation:3,className:a.sidePaper,children:[Object(k.jsx)(w.a,{className:a.boardTitle,children:Object(k.jsxs)(v.a,{variant:"h5",children:[t," DashBoard"]})}),Object(k.jsx)(w.a,{children:"Admin 1"})]})})}),Object(k.jsx)(b.a,{item:!0,xs:12,sm:10,className:a.board,component:"section",children:n})]})})})),Yt=n(203),Gt=n(207),Vt=n(206),Jt=n(202),Ht=n(204),Zt=n(205),Kt=n(20),Xt=n(86),Qt=n.n(Xt),qt=n(85),_t=n.n(qt),$t=Object(X.b)({name:"userAdmin",initialState:{allUsers:[],userAuth:"",alertMsg:null,isLoadingUpdateAuth:!1,currentPage:1,totalCount:null},reducers:{setAllUsers:function(e,t){e.allUsers=t.payload},setUserAuth:function(e,t){e.userAuth=t.payload},setAlertMsg:function(e,t){e.alertMsg=t.payload},setIsLoadingUpdateAuth:function(e,t){e.isLoadingUpdateAuth=t.payload},setCurrentPage:function(e,t){e.currentPage=t.payload},setTotalCount:function(e,t){e.totalCount=t.payload}}}),en=$t.actions,tn=en.setAllUsers,nn=en.setUserAuth,an=en.setAlertMsg,rn=en.setIsLoadingUpdateAuth,cn=en.setCurrentPage,sn=en.setTotalCount,on=function(){return function(e){(function(){var e=C();return fetch("".concat(Q,"/admin/users/count"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))})().then((function(t){!1!==t.success?e(sn(t.usersCount)):e(an(t.message))}))}},ln=function(e,t){return function(n){(function(e,t){var n=C();return fetch("".concat(Q,"/admin/users/?limit=").concat(t,"&page=").concat(e),{headers:{authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()}))})(e,t).then((function(e){!1!==e.success?n(tn(e)):n(an(e.message))}))}},un=function(e,t){return function(n){n(rn(!0)),function(e,t){var n=C();return fetch("".concat(Q,"/admin/users"),{method:"PATCH",headers:{authorization:"Bearer ".concat(n),"content-type":"application/json"},body:JSON.stringify({id:e,roleId:t})}).then((function(e){return e.json()}))}(e,t).then((function(e){if(n(rn(!1)),!1!==e.success)return n(nn(e)),e.message;n(an(e.message))}))}},dn=function(e){return e.userAdmin.isLoadingUpdateAuth},jn=function(e){return e.userAdmin.allUsers},hn=function(e){return e.userAdmin.currentPage},mn=function(e){return e.userAdmin.totalCount},bn=$t.reducer,pn=Object(h.a)({pagination:{height:"10vh"}});function gn(e){var t=e.currentPage,n=e.usersPerPage,a=pn(),r=Object(Kt.a)(),c=Object(E.b)(),i=Object(E.c)(mn);return Object(k.jsxs)("div",{className:a.pagination,children:[Object(k.jsx)(Ze.a,{onClick:function(){c(cn(t-1))},disabled:1===t,"aria-label":"previous page",children:"rtl"===r.direction?Object(k.jsx)(_t.a,{}):Object(k.jsx)(Qt.a,{})}),"".concat(t," of ").concat(Math.ceil(i/n)),Object(k.jsx)(Ze.a,{onClick:function(){c(cn(t+1))},disabled:t>Math.ceil(i/n)-1,"aria-label":"next page",children:"rtl"===r.direction?Object(k.jsx)(Qt.a,{}):Object(k.jsx)(_t.a,{})})]})}var fn=Object(h.a)({table:{minWidth:650,height:"75vh",overflowX:"auto"},pricetable:{height:"80vh",OverflowY:"scroll"}});function On(e){var t=e.children,n=e.currentPage,a=e.usersPerPage,r=fn();return Object(k.jsxs)(Jt.a,{component:st.a,children:[Object(k.jsx)(gn,{currentPage:n,usersPerPage:a}),Object(k.jsxs)(Yt.a,{className:r.table,"aria-label":"simple table",children:[Object(k.jsx)(Ht.a,{children:Object(k.jsxs)(Zt.a,{children:[Object(k.jsx)(Vt.a,{children:"User Id"}),Object(k.jsx)(Vt.a,{align:"right",children:"Full Name"}),Object(k.jsx)(Vt.a,{align:"right",children:"User Name"}),Object(k.jsx)(Vt.a,{align:"right",children:"Email"}),Object(k.jsx)(Vt.a,{align:"right",children:"Current Status"}),Object(k.jsx)(Vt.a,{align:"right",children:"Activate"}),Object(k.jsx)(Vt.a,{align:"right",children:"Inactivate"})]})}),Object(k.jsx)(Gt.a,{children:t})]})]})}function xn(e){var t=e.crop,n=fn();return Object(k.jsx)(Jt.a,{component:st.a,className:n.pricetable,children:Object(k.jsxs)(Yt.a,{"aria-label":"customized table",children:[Object(k.jsx)(Ht.a,{children:Object(k.jsxs)(Zt.a,{children:[Object(k.jsx)(Vt.a,{align:"center",children:"\u65e5\u671f"}),Object(k.jsx)(Vt.a,{align:"center",children:"\u83dc\u540d"}),Object(k.jsx)(Vt.a,{align:"center",children:"\u5e02\u5834\u540d\u7a31"}),Object(k.jsx)(Vt.a,{align:"center",children:"\u5747\u50f9"}),Object(k.jsx)(Vt.a,{align:"center",children:"\u6700\u9ad8\u50f9"}),Object(k.jsx)(Vt.a,{align:"center",children:"\u6700\u4f4e\u50f9"})]})}),Object(k.jsx)(Gt.a,{children:t.map((function(e,t){return Object(k.jsxs)(Zt.a,{children:[Object(k.jsx)(Vt.a,{component:"th",scope:"row",children:e.TransDate}),Object(k.jsx)(Vt.a,{component:"th",scope:"row",children:e.CropName}),Object(k.jsx)(Vt.a,{align:"right",children:e.MarketName}),Object(k.jsx)(Vt.a,{align:"right",children:e.Avg_Price}),Object(k.jsx)(Vt.a,{align:"right",children:e.Upper_Price}),Object(k.jsx)(Vt.a,{align:"right",children:e.Lower_Price})]},t)}))})]})})}function vn(){var e=Object(E.b)(),t=Object(E.c)(dn),n=Object(E.c)(jn).users,r=Object(E.c)(hn);Object(a.useEffect)((function(){e(on()),e(ln(r,5))}),[r,e,t]);var c=function(t){t.preventDefault();var n=parseInt(t.target.id.value),a=parseInt(t.target.roleId.value);e(un(n,a))},i=function(t){t.preventDefault();var n=parseInt(t.target.id.value),a=parseInt(t.target.roleId.value);e(un(n,a))};return Object(k.jsxs)(Rt,{title:"Users",children:[t&&Object(k.jsx)(H,{}),Object(k.jsx)(On,{currentPage:r,usersPerPage:5,children:n&&n.map((function(e,t){return Object(k.jsxs)(Zt.a,{children:[Object(k.jsx)(Vt.a,{component:"th",scope:"row",children:e.id}),Object(k.jsx)(Vt.a,{align:"right",children:e.fullName}),Object(k.jsx)(Vt.a,{align:"right",children:e.userName}),Object(k.jsx)(Vt.a,{align:"right",children:e.email}),Object(k.jsx)(Vt.a,{align:"right",children:e.RoleId}),Object(k.jsx)(Vt.a,{align:"right",children:Object(k.jsxs)("form",{onSubmit:c,className:"activeForm",children:[Object(k.jsx)("input",{type:"hidden",value:e.id,name:"id"}),Object(k.jsx)("input",{type:"hidden",value:"4",name:"roleId"}),Object(k.jsx)(B.a,{variant:"contained",color:"primary",type:"submit",children:"Active"})]})}),Object(k.jsx)(Vt.a,{align:"right",children:Object(k.jsxs)("form",{onSubmit:i,className:"inactiveForm",children:[Object(k.jsx)("input",{type:"hidden",value:e.id,name:"id"}),Object(k.jsx)("input",{type:"hidden",value:"3",name:"roleId"}),Object(k.jsx)(B.a,{variant:"contained",color:"primary",type:"submit",children:"Inactive"})]})})]},t)}))})]})}var yn=n(208),Nn=Object(h.a)((function(e){return{root:{flexGrow:1},appbar:{alignItems:"center"},title:{flexGrow:1,fontFamily:e.typography.fontFamily[1]}}}));function Cn(){var e=Nn();return Object(k.jsx)("div",{className:e.root,children:Object(k.jsx)(yn.a,{position:"fixed",className:e.appbar,children:Object(k.jsx)(v.a,{component:"h2",variant:"h5",className:e.title,children:"FansEat"})})})}var An=n(107),wn=n(100),kn=n.n(wn),Pn=n(101),In=n.n(Pn),Sn=n(103),Ln=n.n(Sn),Un=n(102),Bn=n.n(Un),En=n(105),Dn=n.n(En),Tn=n(104),Mn=n.n(Tn),Fn=Object(h.a)((function(e){return{root:{backgroundColor:"transparent",position:"fixed",right:0,bottom:0},menuItem:{"&:not(:last-child)":{marginBottom:e.spacing(1)}},icon:{marginRight:e.spacing(1)}}}));function Wn(){var e=Fn(),t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],o=Object(s.f)(),l=Object(E.b)(),u=Object(E.c)((function(e){return e.auth.user})),d=u.user.id,h=function(){c(null)};return Object(k.jsxs)("div",{className:e.root,children:[Object(k.jsx)(B.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:"\u9078\u55ae"}),Object(k.jsxs)(An.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:h,children:[Object(k.jsxs)(qe.a,{onClick:h,component:i.b,to:"/",className:e.menuItem,children:[Object(k.jsx)(kn.a,{color:"primary",className:e.icon}),"\u9996\u9801"]}),Object(k.jsxs)(qe.a,{onClick:h,component:i.b,to:"/newpost",className:e.menuItem,children:[Object(k.jsx)(In.a,{color:"primary",className:e.icon}),"\u65b0\u589e\u8cbc\u6587"]}),Object(k.jsxs)(qe.a,{onClick:h,component:i.b,to:"/iprice",className:e.menuItem,children:[Object(k.jsx)(Bn.a,{color:"primary",className:e.icon}),"iPrice"]}),Object(k.jsxs)(qe.a,{onClick:h,component:i.b,to:"/account/".concat(d),className:e.menuItem,children:[Object(k.jsx)(Ln.a,{color:"primary",className:e.icon}),"\u95dc\u65bc\u6211"]}),1===u.user.RoleId&&Object(k.jsxs)(qe.a,{onClick:h,component:i.b,to:"/admin/users",className:e.menuItem,children:[Object(k.jsx)(Mn.a,{color:"primary",className:e.icon}),"\u7528\u6236\u7ba1\u7406"]}),Object(k.jsxs)(qe.a,{onClick:function(){l((function(e){N(""),e(We())})),o.push("/signin")},className:e.menuItem,children:[Object(k.jsx)(Dn.a,{color:"primary",className:e.icon}),"\u767b\u51fa"]})]})]})}var zn=Object(X.b)({name:"crop",initialState:{crop:[]},reducers:{setCrop:function(e,t){e.crop=t.payload}}}),Rn=zn.actions.setCrop,Yn=function(e,t,n,a){return function(r){return function(e,t,n,a){return fetch("".concat("https://agridata.coa.gov.tw/api/v1/AgriProductsTransType/","?Start_time=").concat(e,"&End_time=").concat(t,"&CropName=").concat(n,"&MarketName=").concat(a,"&api_key=").concat("1AROO9QVWM3P47MXDO79M3I29DEPA3")).then((function(e){return e.json()}))}(e,t,n,a).then((function(e){r(Rn(e.Data))})).catch((function(e){console.log(e)}))}},Gn=function(e){return e.crop.crop},Vn=zn.reducer,Jn=Object(h.a)((function(){return{root:{height:"100%",display:"flex",alignItems:"center"},table:{height:"100%"}}}));function Hn(e){var t=e.children,n=Jn();return Object(k.jsxs)(b.a,{container:!0,component:"main",className:n.root,children:[Object(k.jsx)(b.a,{item:!0,xs:12,sm:4,children:t[0]}),Object(k.jsx)(b.a,{item:!0,xs:12,sm:8,children:Object(k.jsx)("div",{className:n.table,children:t[1]})})]})}var Zn=Object(h.a)((function(e){return{root:{height:"95vh",marginTop:e.spacing(5),padding:e.spacing(3),display:"flex",alignItems:"center"}}}));function Kn(){var e=Zn(),t=Object(E.b)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),o=Object(j.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),h=Object(j.a)(d,2),b=h[0],p=h[1],g=Object(a.useState)(""),f=Object(j.a)(g,2),O=f[0],x=f[1],v=Object(a.useState)(!1),y=Object(j.a)(v,2),N=y[0],C=y[1],A=Object(E.c)(Gn);return Object(k.jsx)(m.a,{maxWidth:"xl",className:e.root,children:Object(k.jsxs)(Hn,{children:[Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(Yn(b,O,l,c)).then((function(){console.log("get data")})),C(!0)},children:Object(k.jsx)(it,{handleMarketChange:function(e){i(e.target.value)},handleCropChange:function(e){u(e.target.value)},handleStartDateChange:function(e){var t=e.target.value.split("-"),n=t[0]-1911;t.splice(0,1,n);var a=t.join(".");p(a)},handleEndDateChange:function(e){var t=e.target.value.split("-"),n=t[0]-1911;t.splice(0,1,n);var a=t.join(".");x(a)},marketName:c,cropName:l})}),N&&Object(k.jsx)(xn,{crop:A})]})})}var Xn=function(){var e=Object(E.c)(Ge),t=Object(E.b)();return Object(a.useEffect)((function(){t(ze())}),[t]),Object(k.jsx)(o.a,{theme:d,children:Object(k.jsxs)(i.a,{children:[Object(k.jsx)(l.a,{}),e&&Object(k.jsx)(Cn,{}),Object(k.jsxs)(s.c,{children:[Object(k.jsx)(s.a,{exact:!0,path:"/",children:Object(k.jsx)(Be,{})}),e&&Object(k.jsx)(s.a,{path:"/newpost",children:Object(k.jsx)(mt,{})}),Object(k.jsx)(s.a,{path:"/signup",children:Object(k.jsx)(dt,{})}),Object(k.jsx)(s.a,{path:"/signin",children:Object(k.jsx)(jt,{})}),e&&Object(k.jsx)(s.a,{path:"/account/:id",children:Object(k.jsx)(Dt,{})}),e&&Object(k.jsx)(s.a,{path:"/editpost/:id",children:Object(k.jsx)(Mt,{})}),e&&Object(k.jsx)(s.a,{path:"/iprice",children:Object(k.jsx)(Kn,{})}),e&&1===e.user.RoleId&&Object(k.jsx)(s.a,{path:"/admin/users",children:Object(k.jsx)(vn,{})})]}),e&&Object(k.jsx)(Wn,{})]})})},Qn=Object(X.a)({reducer:{auth:Je,user:Bt,post:Ce,crop:Vn,userAdmin:bn}});c.a.render(Object(k.jsx)(E.a,{store:Qn,children:Object(k.jsx)(Xn,{})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.dc0c8435.chunk.js.map